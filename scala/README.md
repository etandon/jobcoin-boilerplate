# Scala Jobcoin
Simple base project for the Jobcoin project using Scala and SBT. It accepts return address as arguments and prints out a deposit address to the user for them to send their funds to. The rest of the application is left unimplemented.

### Run
`sbt run`

Note: If sbt run does not work run the main method in Main.scala

The project consists of 2 major parts: 
1) API to assign coin mixer owned address to the set of addresses provided by the user:

Get Request: http://localhost:8080/api/assign?addresses=Sam1,Sam2,Sam3,Sam4

Sample response: 

`{
    "assignedAddress": "d4a17a7a-3b40-495b-88b8-d71adc12b850"
}`
![Alt text](docs/AssignAddressPostman.png?raw=true "Optional Title")

2) Core mixer functionality: 

The mixer core functionality is implemented using the actor: WithdrwalActor.scala.

The actor fetches the balance associated with the addresses created by the mixer. If any of the addresses have a non zero balance, the mixer transfers a random percentage of the balance to one of the randomly selected customer addresses. This happens for every address registered with the mixer that has a non zero balance.
The actor calls itself with the current time snapshot continues to poll the transactions between the last actor run and current timestamp. The process continues to infinitely poll for addresses that have balance to be transferred.

Step 1: Mixer address `092a10ae-9d7d-4d0f-b40a-ede77800c4b5` is assigned to customer address `Eshan1,Eshan2,Eshan3`

Step 2: Assign 200 coins to address `092a10ae-9d7d-4d0f-b40a-ede77800c4b5`
   
![Alt text](docs/Step2.png?raw=true "Optional Title")

Logs:

`None: 2019-11-18T03:00:56.099903: Map(092a10ae-9d7d-4d0f-b40a-ede77800c4b5 -> List(Eshan1, Eshan2, Eshan3))
Transactions: List(Transaction(2019-11-17T19:50:27.099,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-17T21:00:17.583,Eshan1,1,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-17T21:56:16.113,Eshan1,1,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-17T22:57:37.199,Eshan1,10,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-17T23:00:46.696,Eshan1,11,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-17T23:08:29.407,Eshan1,12,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-17T23:08:29.408,Eshan1,9,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-17T23:08:29.415,Eshan1,25,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-17T23:08:29.417,Eshan1,20,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-17T23:14:12.040,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-17T23:20:44.033,Eshan1,10,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T00:24:17.528,Eshan1,1,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T00:26:03.563,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T00:26:34.513,Eshan1,18,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T00:26:48.658,Eshan1,4,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T00:27:06.783,Eshan1,21,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T00:27:21.899,Eshan1,5,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T00:27:56.129,Eshan1,2,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:25:39.713,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T01:25:45.120,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T01:25:50.290,Eshan1,6,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:26:13.423,Eshan1,6,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:26:24.538,Eshan1,70,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:26:58.951,Eshan3,6,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:27:37.217,Eshan2,9,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:28:12.461,Eshan1,2,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:28:42.682,Eshan2,1,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:30:30.044,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T01:30:32.149,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T01:30:34.569,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T01:30:37.461,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T01:30:53.429,Eshan3,94,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:31:04.563,Eshan2,23,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:31:42.773,Eshan1,53,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:31:53.891,Eshan3,6,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:32:11.027,Eshan1,9,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:32:44.282,Eshan2,10,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:33:21.489,Eshan3,5,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:35:55.840,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T01:35:58.381,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T01:36:13.355,Eshan2,86,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:36:24.477,Eshan3,10,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:36:50.631,Eshan3,1,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:37:21.965,Eshan3,1,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:37:47.413,Eshan3,1,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:37:57.569,Eshan2,1,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T02:57:17.741,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T02:57:24.106,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T02:57:26.264,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T02:57:28.842,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None))
FilteredAddress: List(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)
Address Balance: List((092a10ae-9d7d-4d0f-b40a-ede77800c4b5,Addresses(200,List(Transaction(2019-11-17T19:50:27.099,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-17T21:00:17.583,Eshan1,1,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-17T21:56:16.113,Eshan1,1,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-17T22:57:37.199,Eshan1,10,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-17T23:00:46.696,Eshan1,11,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-17T23:08:29.407,Eshan1,12,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-17T23:08:29.408,Eshan1,9,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-17T23:08:29.415,Eshan1,25,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-17T23:08:29.417,Eshan1,20,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-17T23:14:12.040,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-17T23:20:44.033,Eshan1,10,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T00:24:17.528,Eshan1,1,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T00:26:03.563,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T00:26:34.513,Eshan1,18,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T00:26:48.658,Eshan1,4,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T00:27:06.783,Eshan1,21,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T00:27:21.899,Eshan1,5,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T00:27:56.129,Eshan1,2,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:25:39.713,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T01:25:45.120,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T01:25:50.290,Eshan1,6,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:26:13.423,Eshan1,6,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:26:24.538,Eshan1,70,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:26:58.951,Eshan3,6,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:27:37.217,Eshan2,9,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:28:12.461,Eshan1,2,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:28:42.682,Eshan2,1,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:30:30.044,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T01:30:32.149,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T01:30:34.569,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T01:30:37.461,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T01:30:53.429,Eshan3,94,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:31:04.563,Eshan2,23,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:31:42.773,Eshan1,53,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:31:53.891,Eshan3,6,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:32:11.027,Eshan1,9,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:32:44.282,Eshan2,10,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:33:21.489,Eshan3,5,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:35:55.840,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T01:35:58.381,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T01:36:13.355,Eshan2,86,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:36:24.477,Eshan3,10,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:36:50.631,Eshan3,1,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:37:21.965,Eshan3,1,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:37:47.413,Eshan3,1,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:37:57.569,Eshan2,1,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T02:57:17.741,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T02:57:24.106,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T02:57:26.264,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T02:57:28.842,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None)))))
Address Balance Filtered: List((092a10ae-9d7d-4d0f-b40a-ede77800c4b5,Addresses(200,List(Transaction(2019-11-17T19:50:27.099,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-17T21:00:17.583,Eshan1,1,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-17T21:56:16.113,Eshan1,1,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-17T22:57:37.199,Eshan1,10,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-17T23:00:46.696,Eshan1,11,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-17T23:08:29.407,Eshan1,12,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-17T23:08:29.408,Eshan1,9,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-17T23:08:29.415,Eshan1,25,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-17T23:08:29.417,Eshan1,20,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-17T23:14:12.040,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-17T23:20:44.033,Eshan1,10,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T00:24:17.528,Eshan1,1,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T00:26:03.563,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T00:26:34.513,Eshan1,18,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T00:26:48.658,Eshan1,4,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T00:27:06.783,Eshan1,21,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T00:27:21.899,Eshan1,5,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T00:27:56.129,Eshan1,2,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:25:39.713,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T01:25:45.120,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T01:25:50.290,Eshan1,6,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:26:13.423,Eshan1,6,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:26:24.538,Eshan1,70,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:26:58.951,Eshan3,6,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:27:37.217,Eshan2,9,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:28:12.461,Eshan1,2,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:28:42.682,Eshan2,1,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:30:30.044,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T01:30:32.149,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T01:30:34.569,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T01:30:37.461,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T01:30:53.429,Eshan3,94,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:31:04.563,Eshan2,23,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:31:42.773,Eshan1,53,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:31:53.891,Eshan3,6,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:32:11.027,Eshan1,9,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:32:44.282,Eshan2,10,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:33:21.489,Eshan3,5,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:35:55.840,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T01:35:58.381,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T01:36:13.355,Eshan2,86,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:36:24.477,Eshan3,10,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:36:50.631,Eshan3,1,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:37:21.965,Eshan3,1,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:37:47.413,Eshan3,1,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T01:37:57.569,Eshan2,1,Some(092a10ae-9d7d-4d0f-b40a-ede77800c4b5)), Transaction(2019-11-18T02:57:17.741,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T02:57:24.106,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T02:57:26.264,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None), Transaction(2019-11-18T02:57:28.842,092a10ae-9d7d-4d0f-b40a-ede77800c4b5,50,None)))))
Transfer List: List(Transfer(092a10ae-9d7d-4d0f-b40a-ede77800c4b5,Eshan3,108))
Status: List(Status(OK))
Action: Transfer_Complete
Adding a random delay of 39`

Step 3: The mixer runs, picks up a random amount from the address `092a10ae-9d7d-4d0f-b40a-ede77800c4b5` in this case 108 and transfers it to `Eshan3`

![Alt text](docs/Step3.png?raw=true "Optional Title")

Step 4: The mixer runs again, 



### Test
`sbt test`
